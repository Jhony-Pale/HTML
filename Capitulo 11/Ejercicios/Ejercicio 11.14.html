<!DOCTYPE html>
<!-- Ejercicio 11.14.html -->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ejercicio 11.14</title>
    <link rel="stylesheet" href="estilo.css" type="text/css">
    <script>
        let coincidencias = [];

        var Texto, res;

        function reinicar(){
            coincidencias = [
                [97, 0], [98, 0], [99, 0], [100, 0], [101, 0], [102, 0],
                [103, 0], [104, 0], [105, 0], [106, 0], [107, 0], [108, 0],
                [109, 0], [110, 0], [241, 0], [111, 0], [112, 0], [113, 0], 
                [114, 0], [115, 0], [116, 0], [117, 0], [118, 0], [119, 0], 
                [120, 0], [121, 0], [122, 0]
            ];
        }

        function iniciar(){
            var boton = document.getElementById("calcular");
            Texto = document.getElementById("Texto");
            res = document.getElementById("res");
            
            reinicar();
            
            boton.addEventListener("click", validar, false);
        }

        function validar(){
            reinicar();
            if(!Texto.value == "")
                calcular();
        }


        function calcular(){
            var texto = Texto.value + "";
            texto = texto.toLowerCase();
            console.log("Ã±".charCodeAt(0));
            for(let carac in texto){
                for(let i = 97 ; i <= 122; i++){
                    if(texto.charCodeAt(carac) == i) guardar(i);
                }
                if(texto.charCodeAt(carac) == 241) guardar(241);
            }
            
            imprimir();
        }

        function guardar(ascii){
            for(let e in coincidencias){
                if(coincidencias[e][0] == ascii) coincidencias[e][1]++;
            }
        }

        function imprimir(){
            for(let e in coincidencias){
                res.value += String.fromCharCode(coincidencias[e][0]) + " aparece " + coincidencias[e][1] + " veces.\n";
            }
        }

        window.addEventListener("load", iniciar, false);
    </script>

</head>
<body>
    <div class="boxContent">
        <form action="#">
            <input type="text" name="Texto" id="Texto" placeholder="Ingresa el texto">
            <input type="button" value="Calcular caracteres" id="calcular">
        </form> <br>
        <textarea id="res" cols="10" rows="28"></textarea>
    </div>
</body>
</html>